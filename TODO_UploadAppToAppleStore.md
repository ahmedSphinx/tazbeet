# خطة رفع تطبيق تظبيت إلى آبل آب ستور

## المعلومات المجمعة

- **هيكل التطبيق والتكوين**:

  - هذا تطبيق فلاتر يسمى "تظبيت" (من pubspec.yaml)، تطبيق إدارة المهام والإنتاجية مع ميزات مثل مؤقت بومودورو، تكامل فيربيس (المصادقة، firestore)، الإشعارات، الأصوات، ودعم متعدد اللغات (العربية، الإنجليزية، إلخ).
  - الإصدار الحالي: 1.0.3+3 (pubspec.yaml). يحتاج إلى زيادة للإصدار (مثل إلى 1.0.4+4 أو أعلى).
  - إعدادات iOS المحددة (ios/Runner/Info.plist):
    - معرف التطبيق: $(PRODUCT_BUNDLE_IDENTIFIER) (يجب أن يكون فريداً؛ من الأندرويد com.company.tazbeet، لذا ربما نفس الشيء أو تغييره إلى شيء مثل com.tazbeet.app).
    - الإصدار: CFBundleShortVersionString = $(FLUTTER_BUILD_NAME)، CFBundleVersion = $(FLUTTER_BUILD_NUMBER).
    - الأذونات: الإشعارات، مكتبة الصور، الكاميرا، الشبكة المحلية، فيسبوك، جوجل.
    - الأيقونات: مكونة عبر icons_launcher (باستخدام assets/logo/logo.png).
  - الأصول: الأيقونات، الخطوط، الأصوات، والصور مشمولة.
  - لا توجد بناءات إصدار أو IPAs موجودة مرئية في هيكل الملفات (مجلد build/ موجود لكن محتوياته غير مفصلة).
  - إعداد فيربيس موجود (.firebaserc, firebase.json)، جيد للخدمات الخلفية لكن يتطلب تكامل App Store Connect لتقارير الأعطال/التحليلات إذا رغب.
  - المنصات: متعدد المنصات (أندرويد، iOS، ويب، إلخ)، لكن التركيز على iOS لآب ستور.

- **المشكلات المحتملة المحددة**:

  - معرف التطبيق: تأكد من أنه فريد وغير مستخدم في آب ستور.
  - الإصدار: الإصدار الدلالي في pubspec.yaml يجب أن يطابق CFBundleShortVersionString/CFBundleVersion في Info.plist.
  - الامتثال للتطبيق: التطبيق يستخدم أذونات (مثل الإشعارات، الكاميرا)—يحتاج مراجعة لسياسات آبل (مثل خصوصية البيانات، لا ادعاءات مضللة).
  - لا توجد لقطات شاشة، رسومات ميزات، أو أصول قائمة المتجر مذكورة؛ مطلوبة لـ App Store Connect.
  - الاختبار: لا يوجد إشارة إلى إعداد اختبار بيتا؛ يُوصى بـ TestFlight أولاً.

- **المتطلبات المفترضة**:
  - Flutter SDK مثبت ومحدث (شغل `flutter doctor` للتأكيد).
  - حساب مطور آبل (رسوم 99 دولار سنوياً إذا غير مُعد).
  - جهاز ماك مع Xcode للبناء والرفع.

## الخطة

الخطة مقسمة إلى مراحل: التحضير، البناء، إعداد آب ستور كونيكت، الرفع والنشر، وبعد الرفع. هذا يضمن إصداراً سلساً ومتوافقاً. لا حاجة لتعديلات كود بعد، لكن بعض ملفات التكوين (مثل pubspec.yaml, Info.plist) قد تحتاج تحديثات طفيفة بناءً على القرارات.

### 1. مرحلة التحضير (الإعداد المحلي وجاهزية التطبيق)

- [ ] تحديث إصدار التطبيق: زد الإصدار في pubspec.yaml (مثل إلى 1.0.4+4) ومزامنة CFBundleShortVersionString/CFBundleVersion في ios/Runner/Info.plist (مثل CFBundleShortVersionString = "1.0.4", CFBundleVersion = "4").
- [ ] التحقق/إعداد معرف التطبيق:
  - حدد معرف فريد (مثل com.tazbeet.app) وحدث PRODUCT_BUNDLE_IDENTIFIER في Xcode أو Info.plist.
  - تأكد من عدم وجود تطبيق آخر بنفس المعرف في آب ستور.
- [ ] مراجعة امتثال التطبيق:
  - شغل `flutter analyze` وأصلح أي تحذيرات (analysis_options.yaml موجود).
  - اختبر التطبيق بشكل شامل: `flutter test`, اختبار يدوي على محاكيات/أجهزة iOS.
  - تأكد من سياسة الخصوصية (مطلوبة لميزات فيربيس/المصادقة)—أنشئ واحدة إذا مفقودة (مثل عبر أدوات مجانية مثل privacypolicygenerator.info) وربطها في التطبيق.
  - أعد أصول المتجر: أيقونة التطبيق (PNG 1024x1024، مكونة بالفعل)، لقطات شاشة (من هواتف iOS، 5-10 لكل نوع جهاز)، رسم ميزة (PNG 1024x768)، فيديو ترويجي (اختياري).
- [ ] تحسين التطبيق:
  - شغل `flutter build ios --analyze-size` للتحقق من حجم الحزمة (<150 ميجابايت موصى).
  - تأكد من دعم اللغات (مثل العربية من اليمين إلى اليسار).

### 2. مرحلة البناء (إنشاء ملفات الإصدار)

- [ ] بناء IPA إصدار: `flutter build ios --release`.
  - الإخراج في build/ios/iphoneos/Runner.app (ثم أنشئ IPA باستخدام Xcode أو `flutter build ipa` إذا متوفر).
- [ ] التحقق من البناء: ثبت على جهاز اختبار (`flutter install`) وتحقق من الوظائف (مثل مصادقة فيربيس، الإشعارات، الأصوات).
- [ ] إذا مشاكل: تصحيح بـ `flutter logs` أو Xcode.

### 3. مرحلة إعداد آب ستور كونيكت

- [ ] أنشئ/سجل الدخول إلى App Store Connect (appstoreconnect.apple.com) وادفع 99 دولار سنوياً إذا جديد.
- [ ] أنشئ تطبيق جديد:
  - اسم التطبيق: "تظبيت" (أو متغيرات محلية).
  - اللغة الافتراضية: الإنجليزية (أضف دعم العربية).
  - معرف التطبيق: حدد نفس المعرف المستخدم في التطبيق.
- [ ] كونف قائمة التطبيق:
  - الوصف: قصير (30 حرف) وكامل (4000 حرف)—أبرز إدارة المهام، بومودورو، مزامنة فيربيس.
  - الفئة: الإنتاجية.
  - الكلمات المفتاحية: مدير-مهام، بومودورو، إنتاجية.
  - تفاصيل الاتصال: البريد الإلكتروني/الموقع.
  - رابط سياسة الخصوصية: مطلوب؛ استضف على GitHub Pages أو Firebase Hosting.
- [ ] إعداد تصنيف المحتوى: أكمل الاستبيان (ربما 4+ للجميع، نظراً لعدم وجود محتوى حساس).
- [ ] التسعير والتوزيع: تطبيق مجاني؟ اختر الدول (مثل الكل ما عدا المقيدة).

### 4. مرحلة الرفع والنشر

- [ ] اختر مسار الإصدار:
  - ابدأ بـ TestFlight (حتى 10000 مختبر) للتعليقات.
  - ارفع IPA إلى TestFlight عبر Xcode أو Transporter.
- [ ] قائمة المتجر:
  - ارفع الأصول: الأيقونة، لقطات الشاشة (iPhone/iPad)، رسم الميزة.
  - الرسومات: أيقونة عالية الدقة، فيديو ترويجي إذا متوفر.
- [ ] مراجعة المحتوى والامتثال:
  - أعلن جمع البيانات (تحليلات فيربيس، المصادقة).
  - الجمهور المستهدف: جميع الأعمار.
  - قدم للمراجعة (يستغرق 1-7 أيام؛ آبل يتحقق من انتهاكات السياسة).
- [ ] الإصدار: بمجرد الموافقة، أطلق إلى المتجر.

### 5. مرحلة بعد الرفع (المراقبة والصيانة)

- [ ] المراقبة: استخدم لوحة تحكم App Store Connect للأعطال (دمج Firebase Crashlytics إذا غير موجود)، التقييمات، التنزيلات.
- [ ] التحديثات: للإصدارات المستقبلية، زد CFBundleVersion، أعد البناء، وارفع IPA جديد.
- [ ] التسويق: شارك كلمات ASO (تحسين متجر التطبيقات) مثل "متتبع مهام"، "تطبيق بومودورو".
- [ ] النسخ الاحتياطي: احفظ حساب المطور بشكل آمن.

## الملفات التابعة المراد تعديلها

- pubspec.yaml: لزيادة الإصدار وأي أصول/تبعيات جديدة (مثل إضافة crashlytics).
- ios/Runner/Info.plist: مزامنة CFBundleShortVersionString/CFBundleVersion؛ تحديث PRODUCT_BUNDLE_IDENTIFIER إذا لزم.
- لا تغييرات كود كبيرة؛ طفيفة إذا مشاكل امتثال (مثل إضافة شاشة سياسة خصوصية).

## خطوات المتابعة

- [ ] تأكد من معرف التطبيق الفريد وحدث Info.plist إذا لزم.
- [ ] شغل `flutter doctor` و `flutter build ios --release` لاختبار عملية البناء.
- [ ] أعد أصول المتجر (لقطات شاشة، وصف)—المستخدم يقدم إذا مخصص.
- [ ] بعد موافقة الخطة، نفذ البناء وأساعد في رفع App Store Connect (ملاحظة: لا يمكنني الوصول إلى حسابات خارجية، لذا المستخدم يتعامل مع خطوات الكونيكت).
