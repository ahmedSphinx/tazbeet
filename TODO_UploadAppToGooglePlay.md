# خطة رفع تطبيق تازبيت إلى جوجل بلاي

## المعلومات المجمعة

- **هيكل التطبيق والتكوين**:

  - هذا تطبيق فلاتر يسمى "تازبيت" (من pubspec.yaml)، تطبيق إدارة المهام والإنتاجية مع ميزات مثل مؤقت بومودورو، تكامل فيربيس (المصادقة، firestore)، الإشعارات، الأصوات، ودعم متعدد اللغات (العربية، الإنجليزية، إلخ).
  - الإصدار الحالي: 1.0.0+1 (pubspec.yaml). يحتاج إلى زيادة للإصدار (مثل إلى 1.0.0+2 أو أعلى).
  - إعدادات أندرويد المحددة (android/app/build.gradle.kts):
    - معرف التطبيق: com.company.tazbeet (يجب أن يكون فريداً؛ فكر في تغييره إلى شيء مثل com.tazbeet.app إذا كان "company" بديلاً).
    - الحد الأدنى لـ SDK: 23 (أندرويد 6.0+)، الهدف SDK: موروث من فلاتر (ربما 34+؛ تأكد بـ `flutter doctor`).
    - التوقيع مكون للإصدار: يشير إلى keystore في `../../keystore/tazbeet.keystore` مع الاسم المستعار الافتراضي "tazbeet-key" وكلمات المرور "tazbeet2025". لا يوجد ملف key.properties في الجذر (من list_files)، لذا قد يفشل التوقيع بدونها—مسار keystore يشير إلى وجوده في /keystore/، لكن يحتاج التحقق.
    - أنواع البناء: الإصدار مصغر مع ProGuard مفعل.
    - التبعيات: تشمل فيربيس، تسجيل الدخول بجوجل، إلخ، متوافقة مع جوجل بلاي.
  - الأصول: الأيقونات مكونة عبر icons_launcher (باستخدام assets/logo/logo.png)، الخطوط، الأصوات، والصور مشمولة.
  - لا توجد بناءات إصدار أو APKs/AABs موجودة مرئية في هيكل الملفات (مجلد build/ موجود لكن محتوياته غير مفصلة).
  - إعداد فيربيس موجود (.firebaserc, firebase.json)، جيد للخدمات الخلفية لكن يتطلب تكامل Play Console لتقارير الأعطال/التحليلات إذا رغب.
  - المنصات: متعدد المنصات (أندرويد، iOS، ويب، إلخ)، لكن التركيز على أندرويد لجوجل بلاي.

- **المشكلات المحتملة المحددة**:

  - إعداد keystore: إذا لم يكن key.properties موجوداً، سيفشل توقيع الإصدار. الافتراضيات بدائل—يجب على المستخدم تقديم keystore حقيقي أو إنشاء واحد.
  - الإصدار: الإصدار الدلالي في pubspec.yaml يجب أن يطابق versionCode/versionName في أندرويد.
  - الامتثال للتطبيق: التطبيق يستخدم أذونات (مثل الإشعارات، التخزين عبر تبعيات مثل permission_handler)—يحتاج مراجعة لسياسات جوجل بلاي (مثل خصوصية البيانات، لا ادعاءات مضللة).
  - لا توجد لقطات شاشة، رسومات ميزات، أو أصول قائمة المتجر مذكورة؛ مطلوبة لـ Play Console.
  - الاختبار: لا يوجد إشارة إلى إعداد اختبار بيتا؛ يُوصى بمسار الاختبار الداخلي أولاً.

- **المتطلبات المفترضة**:
  - Flutter SDK مثبت ومحدث (شغل `flutter doctor` للتأكيد).
  - حساب جوجل بلاي كونسول (رسوم 25 دولار مرة واحدة إذا غير مُعد).
  - الوصول إلى حساب مطور مع هوية موثقة.

## الخطة

الخطة مقسمة إلى مراحل: التحضير، البناء، إعداد جوجل بلاي كونسول، الرفع والنشر، وبعد الرفع. هذا يضمن إصداراً سلساً ومتوافقاً. لا حاجة لتعديلات كود بعد، لكن بعض ملفات التكوين (مثل pubspec.yaml, build.gradle.kts) قد تحتاج تحديثات طفيفة بناءً على القرارات.

### 1. مرحلة التحضير (الإعداد المحلي وجاهزية التطبيق)

- [x] تحديث إصدار التطبيق: زد الإصدار في pubspec.yaml (مثل إلى 1.0.1+2) ومزامنة versionCode/versionName في android/app/build.gradle.kts (مثل versionCode = 2, versionName = "1.0.1").
- [x] التحقق/إعداد التوقيع:
  - تحقق إذا كان keystore/tazbeet.keystore موجوداً (شغل `ls keystore/`).
  - إذا مفقود، أنشئ keystore جديد باستخدام `keytool -genkey -v -keystore keystore/tazbeet.keystore -alias tazbeet-key -keyalg RSA -keysize 2048 -validity 10000`.
  - أنشئ/حدث key.properties في android/ بقيم آمنة (storeFile, storePassword, keyAlias, keyPassword). أضفه إلى .gitignore للأمان.
- [x] مراجعة امتثال التطبيق:
  - شغل `flutter analyze` وأصلح أي تحذيرات (analysis_options.yaml موجود).
  - اختبر التطبيق بشكل شامل: `flutter test`, اختبار يدوي على محاكيات/أجهزة (حد أدنى SDK 23).
  - تأكد من سياسة الخصوصية (مطلوبة لميزات فيربيس/المصادقة)—أنشئ واحدة إذا مفقودة (مثل عبر أدوات مجانية مثل privacypolicygenerator.info) وربطها في التطبيق.
  - أعد أصول المتجر: أيقونة التطبيق (PNG 512x512، مكونة بالفعل)، لقطات شاشة (من هواتف أندرويد، 2-8 لكل نوع جهاز)، رسم ميزة (PNG 1024x500)، فيديو ترويجي (اختياري).
- [x] تحسين التطبيق:
  - شغل `flutter build apk --analyze-size` للتحقق من حجم الحزمة (<150 ميجابايت موصى).
  - فعل التشويش (مفعل بالفعل في build.gradle.kts) وراجع قواعد ProGuard لتبعيات فيربيس.

### 2. مرحلة البناء (إنشاء ملفات الإصدار)

- [x] بناء AAB إصدار (مفضل لمتجر بلاي، أصغر من APK): `flutter build appbundle --release`.
  - يستخدم تكوين التوقيع؛ الإخراج في build/app/outputs/bundle/release/app-release.aab.
- [ ] (اختياري) بناء APK للتثبيت الجانبي/الاختبار: `flutter build apk --release`.
- [x] التحقق من البناء: ثبت على جهاز اختبار (`flutter install`) وتحقق من الوظائف (مثل مصادقة فيربيس، الإشعارات، الأصوات).
- [ ] إذا مشاكل: تصحيح بـ `flutter logs` أو أندرويد ستوديو.

### 3. مرحلة إعداد جوجل بلاي كونسول

- [ ] أنشئ/سجل الدخول إلى Play Console (console.cloud.google.com) وادفع 25 دولار إذا جديد.
- [ ] أنشئ تطبيق جديد:
  - اسم التطبيق: "تازبيت" (أو متغيرات محلية).
  - اللغة الافتراضية: الإنجليزية (أضف دعم العربية).
  - ارفع AAB كأول إصدار.
- [ ] كونف قائمة التطبيق:
  - الوصف: قصير (80 حرف) وكامل (4000 حرف)—أبرز إدارة المهام، بومودورو، مزامنة فيربيس.
  - الفئة: الإنتاجية.
  - العلامات: مدير-مهام، بومودورو، إنتاجية.
  - تفاصيل الاتصال: البريد الإلكتروني/الموقع.
  - رابط سياسة الخصوصية: مطلوب؛ استضف على GitHub Pages أو Firebase Hosting.
- [ ] إعداد تصنيف المحتوى: أكمل الاستبيان (ربما E للجميع، نظراً لعدم وجود محتوى حساس).
- [ ] التسعير والتوزيع: تطبيق مجاني؟ اختر الدول (مثل الكل ما عدا المقيدة).
- [ ] توقيع التطبيق: استخدم توقيع تطبيق جوجل بلاي (موصى؛ ارفع بصمة الشهادة من keystore).

### 4. مرحلة الرفع والنشر

- [ ] اختر مسار الإصدار:
  - ابدأ بالاختبار الداخلي (حتى 100 مختبر) أو البيتا المغلق للتعليقات.
  - ارفع AAB إلى المسار، أضف ملاحظات الإصدار (مثل "الإصدار الأولي مع إدارة المهام ومؤقت بومودورو").
- [ ] قائمة المتجر:
  - ارفع الأصول: الأيقونة، لقطات الشاشة (هاتف/لوحي)، رسم الميزة.
  - الرسومات: أيقونة عالية الدقة، فيديو ترويجي إذا متوفر.
- [ ] مراجعة المحتوى والامتثال:
  - أعلن جمع البيانات (تحليلات فيربيس، المصادقة).
  - الجمهور المستهدف: جميع الأعمار.
  - قدم للمراجعة (يستغرق 1-7 أيام؛ جوجل يتحقق من انتهاكات السياسة).
- [ ] الإصدار: بمجرد الموافقة، أطلق إلى مسار الإنتاج (إطلاق تدريجي اختياري، مثل 20% المستخدمين أولاً).

### 5. مرحلة بعد الرفع (المراقبة والصيانة)

- [ ] المراقبة: استخدم لوحة تحكم Play Console للأعطال (دمج Firebase Crashlytics إذا غير موجود)، التقييمات، التنزيلات.
- [ ] التحديثات: للإصدارات المستقبلية، زد versionCode، أعد البناء، وارفع AAB جديد.
- [ ] التسويق: شارك كلمات ASO (تحسين متجر التطبيقات) مثل "متتبع مهام"، "تطبيق بومودورو".
- [ ] النسخ الاحتياطي: احفظ keystore بشكل آمن (مثل في السحابة مع 2FA)؛ فقدانه يمنع التحديثات.

## الملفات التابعة المراد تعديلها

- pubspec.yaml: لزيادة الإصدار وأي أصول/تبعيات جديدة (مثل إضافة crashlytics).
- android/app/build.gradle.kts: مزامنة versionCode/versionName؛ تحديث applicationId إذا لزم.
- android/key.properties: أنشئ إذا مفقود (ملف آمن، غير ملتزم).
- لا تغييرات كود كبيرة؛ طفيفة إذا مشاكل امتثال (مثل إضافة شاشة سياسة خصوصية).

## خطوات المتابعة

- [ ] تأكد وجود keystore وأنشئ key.properties إذا لزم (يمكنني الإرشاد بأوامر).
- [ ] شغل `flutter doctor` و `flutter build appbundle --release` لاختبار عملية البناء.
- [ ] أعد أصول المتجر (لقطات شاشة، وصف)—المستخدم يقدم إذا مخصص.
- [ ] بعد موافقة الخطة، نفذ البناء وأساعد في رفع الكونسول (ملاحظة: لا يمكنني الوصول إلى حسابات خارجية، لذا المستخدم يتعامل مع خطوات الكونسول).
